<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl">
  <title data-ice="title">Home | cognicity-cards</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="Client input cards for crowd sourced disaster mapping applications."><meta property="twitter:card" content="summary"><meta property="twitter:title" content="cognicity-cards"><meta property="twitter:description" content="Client input cards for crowd sourced disaster mapping applications."></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/urbanriskmap/cognicity-cards"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/app.js~App.html">App</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/app.js~PreActivateStep.html">PreActivateStep</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-configure">configure</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-card-notification">components/card-notification</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/card-notification/card-notification.js~CardNotification.html">CardNotification</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-component-template">components/component-template</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/component-template/component-template.js~ComponentTemplate.html">ComponentTemplate</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-depth-bg">components/depth-bg</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/depth-bg/depth-bg.js~DepthBg.html">DepthBg</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-nav-buttons">components/nav-buttons</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/nav-buttons/nav-buttons.js~NavButtons.html">NavButtons</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-title-bar">components/title-bar</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/title-bar/title-bar.js~TitleBar.html">TitleBar</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#resources">resources</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/resources/config.js~Config.html">Config</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-configure">configure</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#resources-locales">resources/locales</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/resources/locales/en.js~LocaleEn.html">LocaleEn</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/resources/locales/local_lang.js~LocaleLocal.html">LocaleLocal</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#routes--route-handlers-flood-route">routes/_route_handlers/flood-route</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/routes/_route_handlers/flood-route/flood.js~Flood.html">Flood</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#routes-cards-card-template">routes/cards/card-template</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/routes/cards/card-template/card-template.js~CardTemplate.html">CardTemplate</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#routes-cards-depth">routes/cards/depth</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/routes/cards/depth/depth.js~Depth.html">Depth</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#routes-cards-description">routes/cards/description</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/routes/cards/description/description.js~Description.html">Description</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#routes-cards-location">routes/cards/location</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/routes/cards/location/location.js~Location.html">Location</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#routes-cards-photo">routes/cards/photo</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/routes/cards/photo/photo.js~Photo.html">Photo</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#routes-cards-prep">routes/cards/prep</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/routes/cards/prep/prep.js~Prep.html">Prep</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#routes-cards-review">routes/cards/review</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/routes/cards/review/review.js~Review.html">Review</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#routes-cards-terms">routes/cards/terms</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/routes/cards/terms/terms.js~Terms.html">Terms</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#routes-error">routes/error</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/routes/error/error.js~Error.html">Error</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#routes-route-landing">routes/route-landing</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/routes/route-landing/route-landing.js~RouteHandler.html">RouteHandler</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#routes-thanks">routes/thanks</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/routes/thanks/thanks.js~Thanks.html">Thanks</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#services">services</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/services/auth-service.js~AuthService.html">AuthService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/services/report-submission.js~ReportSubmission.html">ReportSubmission</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/services/signed-request.js~SignedRequest.html">SignedRequest</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#utility">utility</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/utility/image-utility.js~ImageUtility.html">ImageUtility</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/utility/report-card.js~ReportCard.html">ReportCard</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/utility/utility.js~Utility.html">Utility</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><div data-ice="index" class="github-markdown"><h3 id="cognicity-cards">Cognicity cards</h3><p>Front-end code &#xA0;
<a href="https://travis-ci.org/urbanriskmap/petabencana.id"><img src="https://travis-ci.org/urbanriskmap/petabencana.id.svg?branch=master" alt="Build Status"></a>
<br>
<a href="https://github.com/urbanriskmap/petabencana-docs/blob/master/README.md">Project description</a>
<br>
<br>
This platform is built using the Aurelia framework, which has a few prerequisites. To get started, follow the machine &amp; application setup steps.</p>
<hr>
<h3 id="machine-setup">Machine setup</h3><ul>
<li>Install NodeJS &gt;= 4.x<ul>
<li>You can <a href="https://nodejs.org/en/">download it here</a>.</li>
</ul>
</li>
<li>Install NPM 3.x<ul>
<li>Even though you may have the latest NodeJS, that doesn&apos;t mean you have the latest version of NPM. You can check your version with <code>npm -v</code>. If you need to update, run <code>npm install npm -g</code>.</li>
</ul>
</li>
<li>Install Aurelia CLI<ul>
<li><code>npm install aurelia-cli -g</code></li>
</ul>
</li>
</ul>
<h3 id="application-setup">Application setup</h3><ul>
<li>Install the project dependencies<ul>
<li><code>npm install</code></li>
</ul>
</li>
</ul>
<hr>
<h3 id="project-structure">Project Structure</h3><p>The project structure is as follows:</p>
<ul>
<li><strong>assets</strong>: Static assets such as fonts, images, vector graphics, and icons</li>
<li><strong>aurelia_project</strong>: Aurelia generated folder containing config (Check Configuration section for more details) and framework specific libraries</li>
<li><strong>scripts</strong>: Generated scripts from the build process</li>
<li><strong>src</strong>: The main application code with the following files and subfolders<ul>
<li><strong>components</strong>: Contains custom-elements to be used in routes (Read more about Aurelia Custom Elements <a href="http://aurelia.io/hub.html#/doc/article/aurelia/framework/latest/cheat-sheet/9">here</a>)</li>
<li><strong>resources</strong>: Contains globally available resource files<ul>
<li><strong>locales</strong>: translation files for supported locales (en and id currently)</li>
<li><strong>style_sheets</strong>: contains the parent .less files that get imported in the .less files accompanying all HTML templates</li>
<li><strong>config.js</strong>: Check Configuration section for more details</li>
<li><strong>reportCard.js</strong>: singleton class shared across all cards</li>
</ul>
</li>
<li><strong>routes</strong>: Read more about how Aurelia Routing works <a href="http://aurelia.io/hub.html#/doc/article/aurelia/router/latest/router-configuration/1">here</a><ul>
<li><strong>cards</strong>: Contains card decks for GRASP interface (View and view model for each card. Read Card decks section for more information.)</li>
<li><strong>landing</strong>: Contains template route for maps</li>
</ul>
</li>
</ul>
</li>
<li><strong>test</strong>: The tests to run (Check Testing section for more details)</li>
</ul>
<hr>
<h3 id="card-decks">Card Decks</h3><ul>
<li>Refer assets/card-decks/README.md</li>
</ul>
<hr>
<h3 id="routing">Routing</h3><ul>
<li><em>App router is configured in /src/app.js</em><ul>
<li>&apos;/:deck/:id&apos; <em>query parameter (card deck &amp; one time card id): Deck specifies which card-deck to load, card id is the link to access report cards, (use test123 as card id in dev &amp; stage environments</em></li>
</ul>
</li>
</ul>
<hr>
<h3 id="configuration">Configuration</h3><ul>
<li>Environments<ul>
<li><em>to run in local, update the following values in /aurelia_project/environments/dev.js</em></li>
<li><code>debug</code> : (true/false) enable aurelia router logs in browser console</li>
<li><code>testing</code> : (true/false) enable aurelia-testing plugin</li>
<li><code>enable_test_cardid</code>: set to false to disable cardid=test123 in prod environments (Default is true for local and dev environments)</li>
<li><em>environment specific parameters</em></li>
<li><code>title</code> : set project title to display in browser tabs</li>
<li><code>supported_languages</code>: set it to an array of languages you support (Default is [&apos;en&apos;, &apos;id&apos;]. In case you add more languages, update  the array and add corresponding locale information in /src/resources/locales/TWO_LETTER_LANGUAGE_CODE.js)</li>
<li><code>default_language</code>: set it to one of the languages in <code>supported_languages</code> (Default is &apos;en&apos;)</li>
<li><code>tile_layer</code> : set map tile source url (allows using multiple tileLayers for development, staging, production, etc)</li>
<li><code>data_server</code> : set url of cognicity server (Default value is <a href="http://localhost:8001/">http://localhost:8001/</a> if using <a href="https://github.com/urbanriskmap/cognicity-server">cognicity-server</a>)</li>
<li><code>app</code> : set it to map landing page url (Default value is <a href="http://localhost:9000/">http://localhost:9000/</a> if using this platform)</li>
</ul>
</li>
</ul>
<ul>
<li>Map Configuration<ul>
<li><em>to support cities &amp; regions, update the <code>instance_regions</code> in /aurelia_project/deployments/:dep.js &gt; map</em></li>
<li>Default supported cities are Jakarta, Surabaya, Bandung for cards.petabencana.id (Refer <a href="https://docs.petabencana.id/routes/cities.html">here</a> for updates)</li>
<li>Default supported city is Chennai for cards.riskmap.in</li>
<li>For every new instance region (city) added, set a three letter <code>region</code> code. And set the <code>bounds</code> to have southwest and northeast bounds of the city in <code>sw</code> and <code>ne</code> respectively.</li>
<li>The value set in <code>default_region</code> sets the initial map view in <a href="http://localhost:9000/flood/test123">http://localhost:9000/flood/test123</a> &gt; location card</li>
</ul>
</li>
</ul>
<hr>
<h3 id="to-build">To build</h3><ul>
<li>Start the development server<ul>
<li><code>DEP=$dep npm start</code> This will start a dev server on <a href="http://localhost:9000">http://localhost:9000</a></li>
<li>Note: A deployment parameter (currently supports pb : petabencana or rm : riskmap) must be provided</li>
</ul>
</li>
<li>To generate a production build<ul>
<li>Run <code>DEP=$dep npm run build</code></li>
<li>This will generate new scripts in scripts/ and also auto increment the reference numbers in index.html. Upload the following to the deployment destination (e.g. S3 bucket) protecting the structure:<pre><code><code class="source-code prettyprint">assets/*
scripts/*
index.html
favicon.ico</code>
</code></pre></li>
</ul>
</li>
</ul>
<hr>
<h3 id="testing">Testing</h3><p>Testing environment supported by <a href="https://www.browserstack.com/">BrowserStack</a></p>
<p>Do (&apos;npm test&apos;) to build the project and run the tests.</p>
<p>If you want to run BrowserStack, you need to provide environment variables with your
username and password. Put <code>export BROWSERSTACK_USERNAME=yourUsername</code> and <code>export BROWSERSTACK_KEY=yourAccessKey</code> into
your ~/.bashrc or ~/.bash_profile in order for karma to pick up the browserstack credentials. Now run <code>source ~/bash_profile</code> and
npm test in order to build the bundle and run karama unit tests against it.</p>
<p>##e2e testing:</p>
<p>End to end testing is implemented using protractor, webdriver, and browserstack. First install protractor: <code>npm install -g protractor</code> then download the webdriver binaries: <code>webdriver-manager update</code>. In order to run the tests, the front end must be being served. Run au run in a separate terminal, and then run <code>protractor protractor.conf.js</code> which will start the tests. Protractor can be a little finicky, so you should let it run without interacting with other browser windows.</p>
<p>Mockapi to be used in the future.</p>
<h2 id="contribution-guidelines">Contribution Guidelines</h2><ul>
<li>Issues are tracked on <a href="https://github.com/urbanriskmap/petabencana.id/issues">github</a>.</li>
</ul>
<h3 id="release">Release</h3><p>The release procedure is as follows:</p>
<ul>
<li>Update the CHANGELOG.md file with the newly released version, date, and a high-level overview of changes. Commit the change.</li>
<li>Update JSDoc documentation if required (see above).</li>
<li>Create a tag in git from the current head of master. The tag version should be the same as the version specified in the package.json file - this is the release version.</li>
<li>Update the version in the package.json file and commit the change.</li>
<li>Further development is now on the updated version number until the release process begins again.</li>
</ul>
<h3 id="license">License</h3></div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.0.1)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
